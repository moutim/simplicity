<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="stylesheet" href="assets/css/style.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- title é o que mostra quando pesquisamos no google -->
    <!-- O ideal é 60caracters -->
    <title>Entre em contato com o grupo Simplicity</title>

    <!-- FavIcon -->
    <link rel="shortcut icon" href="assets/imagens/favicon.png" type="image/x-icon">

    <!-- MetaDescription -->
    <!-- O ideal de caracters é 160 -->
    <meta name="description" content="Entre em contato com o time Simplicity">

    <!-- Metaname KW -->
    <!-- Palavras chave para a pesquisa no Google -->
    <!-- Nao usada como KW para pesquisas hoje em dia -->
    <meta name="keywords" content="contato">
</head>
<body>
    <!-- Cabecalho/topo -->
    <header>
        <div class="limitador">
            <h1>
                <!-- podemos colocar a logo dentro do H1 -->
                <a href="">Simplicity</a>
            </h1>

            <nav>
                <!-- &equiv; cria o simbolo de tres linha do menu -->
                <h2><a href="" class="icone">Menu &equiv;</a></h2>
                <ul class="menu">
                    <li><a href="index.html" title="Pagina inical">Home</a></li>
                    <li><a href="produtos.html" title="Conheça nossos produtos">Produtos</a></li>
                    <li><a href="servicos.html" title="Da criação de sites a loja, conheça nossos serviços">Serviços</a></li>
                    <li><a href="contatos.html" title="Fale com a equipe Simplicity">Contatos</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <!-- Fim do cabecalho -->


    <!-- Conteudo -->
    <main>  
        <article class="limitador conteudo-contato">
            <h2>Contato</h2>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Libero dolorum, maxime et consequatur architecto perspiciatis impedit ullam. Facilis sapiente magni accusantium consectetur qui omnis, consequatur autem iusto sunt tenetur id!</p>
            <p>Incidunt illum, voluptatem reprehenderit quibusdam minus temporibus rem fugiat odit earum ipsum ratione excepturi quasi fugit suscipit libero, recusandae repellat culpa. Aspernatur natus omnis ad aperiam magnam suscipit, praesentium quasi.</p>

            <!-- Formulario -->
            <form id="my-form" action="https://formspree.io/f/xpzkbbpq" method="POST">
                <div>
                    <label for="nome">Nome:</label>
                    <input type="text" name="nome" id="nome" placeholder="Nome completo">
                </div>

                <div>
                    <label for="email">E-mail:</label>
                    <input type="email" name="email" id="email">
                </div>

                <div>
                    <label for="data">Data de nascimento:</label>
                    <input type="date" name="data" id="data">
                </div>

                <div>
                    <label for="telefone">Celular ou telefone:</label>
                    <input type="tel" name="telefone" id="telefone" placeholder="Numero com DDD">
                </div>

                <div>
                    <label for="doc">CPF ou CNPJ:</label>
                    <input type="tel" name="doc" id="doc" placeholder="Digite o numero sem tracos ou pontos">
                </div>

                <div>
                    <label for="idade">Idade:</label>
                    <input type="number" name="idade" id="idade" min="18" max="120">
                </div>

                <div>
                    <p>Gênero:</p>
                    
                    <input type="radio" name="genero" id="masculino" value="masculino">
                    <label for="masculino">Masculino</label>

                    <input type="radio" name="genero" id="feminino" value="feminino">
                    <label for="feminino">Feminino</label>

                    <input type="radio" name="genero" id="outros" value="outros">
                    <label for="outros">Outros</label>
                </div>

                <div>
                    <p>Interesses:</p>
                    
                    <input type="checkbox" name="interesses" id="design" value="design">
                    <label for="design">Design</label>
                    
                    <input type="checkbox" name="interesses" id="marketing" value="marketing">
                    <label for="marketing">Marketing</label>
                    
                    <input type="checkbox" name="interesses" id="programacao" value="programacao">
                    <label for="programacao">Programação</label>
                </div>

                <div>
                    <label for="cep">CEP:</label>
                    <input type="text" name="cep" id="cep" maxlength="10" required>
                    <b id="status"></b>
                </div>

                <div>
                    <label for="endereco">Endereço:</label>
                    <input type="text" name="endereco" id="endereco" size="50">
                </div>

                <div>
                    <label for="bairro">Bairro:</label>
                    <input type="text" name="bairro" id="bairro">
                </div>

                <div>
                    <label for="cidade">Cidade:</label>
                    <input type="text" name="cidade" id="cidade">
                </div>

                <div>
                    <label for="estado">Estado:</label>
                    <input type="text" name="estado" id="estado">
                </div>

                <!-- <div>
                    <label for="numero">Numero:</label>
                    <input type="number" name="numero" id="numero" maxlength="10">
                </div>

                <div>
                    <label for="complemento">Complemento:</label>
                    <input type="text" name="complemento" id="complemento">
                </div> -->

                <div>
                    <label for="assunto">Assunto:</label>
                    <select name="assunto" id="assunto">
                        <option></option>
                        <option>Duvidas</option>
                        <option>Elogios</option>
                        <option>Reclamacoes</option>
                        <option>Outros</option>
                    </select>
                </div>

                <div>
                    <label for="mensagem">Mensagem:
                        <span id="maximo">(Restam <b id="caracteres">100</b> caracteres)</span><br>
                    </label>
                    <textarea name="mensagem" id="mensagem" cols="30" rows="10" maxlength="100"></textarea>

                </div>

                <button id="my-form-button" type="submit">Enviar dados</button>
                <p id="my-form-status"></p>




            </form>
        </article>
    </main>
    <!-- Fim do conteudo -->


    <!-- Rodape -->
    <footer>
        <p>Simplicity é um site fictício desenvilvido por Vitor Moutim - Senac Penha &copy; 2021</p>
    </footer>
    <!-- Fim do rodape -->
    
    <!-- Details cria uma caixa que aparece e esconde para mostrar detalhes -->
    <!-- Summary nos mudamos o nome do botao -->
    <!-- <details>
        <summary>Veja mais!</summary>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quam iure, deleniti quis debitis saepe dolore libero voluptate doloribus aliquid alias! Ipsam nesciunt consectetur et cupiditate dolorum magni magnam explicabo debitis?</p>
    </details> -->

    <script src="assets/js/js.js"></script>

    <!-- Linkando o vanillamask -->
    <script src="assets/plugins/vanilla-masker.min.js"></script>
        <!-- Formatando numero de telefone com valilla mask -->
        <script>
            function inputHandler(masks, max, event) {
                var c = event.target;
                var v = c.value.replace(/\D/g, '');
                var m = c.value.length > max ? 1 : 0;
                VMasker(c).unMask();
                VMasker(c).maskPattern(masks[m]);
                c.value = VMasker.toPattern(v, masks[m]);
                }

                var telMask = ['(99) 9999-9999', '(99) 99999-9999'];
                var tel = document.querySelector('#telefone');
                VMasker(tel).maskPattern(telMask[0]);
                tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);

                var telMask = ['999.999.999-999', '99.999.999/9999-99'];
                var tel = document.querySelector('#doc');
                VMasker(tel).maskPattern(telMask[0]);
                tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);

                var telMask = ['99999-999'];
                var tel = document.querySelector('#cep');
                VMasker(tel).maskPattern(telMask[0]);
                tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);

        </script>

    <!-- Linkando biblioteca Jquery -->
    <script src="assets/plugins/jquery-3.6.0.min.js"></script>    
        <!-- Script copiado diretamente do site da API: https://viacep.com.br/exemplo/jquery/  -->
    <script>

        $(document).ready(function() {

            function limpa_formulário_cep() {
                // Limpa valores do formulário de cep.
                $("#endereco").val("");
                $("#bairro").val("");
                $("#cidade").val("");
                $("#estado").val("");
            }
            
            //Quando o campo cep perde o foco.
            $("#cep").blur(function() {

                //Nova variável "cep" somente com dígitos.
                var cep = $(this).val().replace(/\D/g, '');

                //Verifica se campo cep possui valor informado.
                if (cep != "") {

                    //Expressão regular para validar o CEP.
                    var validacep = /^[0-9]{8}$/;

                    //Valida o formato do CEP.
                    if(validacep.test(cep)) {

                        //Preenche os campos com "..." enquanto consulta webservice.
                        $("#endereco").val("...");
                        $("#bairro").val("...");
                        $("#cidade").val("...");
                        $("#estado").val("...");
                        $("#status").text("CEP encontrado!").css('color','green')

                        //Consulta o webservice viacep.com.br/
                        $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                            if (!("erro" in dados)) {
                                //Atualiza os campos com os valores da consulta.
                                $("#endereco").val(dados.logradouro);
                                $("#bairro").val(dados.bairro);
                                $("#cidade").val(dados.localidade);
                                $("#estado").val(dados.uf);
                            } //end if.
                            else {
                                //CEP pesquisado não foi encontrado.
                                limpa_formulário_cep();
                                $("#status").text("CEP não encontrado.").css('color','red');
                            }
                        });
                    } //end if.
                    else {
                        //cep é inválido.
                        limpa_formulário_cep();
                        $("#status").text("Formato de CEP inválido.").css('color','red');
                    }
                } //end if.
                else {
                    //cep sem valor, limpa formulário.
                    limpa_formulário_cep();
                }
            });
        });

    </script>

    <!-- Script do contador de caracteres -->
    <script>
        const spanMaximo = $("#maximo");
        const bCaracteres = $("#caracteres");
        const textMensagem = $("#mensagem")

        let quantidade = 100;

        textMensagem.on("input", function(){
            let conteudo = textMensagem.val();

            let contagem = quantidade - conteudo.length

            bCaracteres.text(contagem)

            if(contagem == 0){
                spanMaximo.css('color', 'red')
                spanMaximo.text(`(Limite de caracteres atingido)`)
            }
             else {
                spanMaximo.html("(Restam <b id='caracteres'>" +contagem+ "</b> caracteres)")
                spanMaximo.css('color', 'black')
            }
        })
    </script>

    <!-- Script do FormSpree -->
    <script>
        var form = document.getElementById("my-form");
        
        async function handleSubmit(event) {
          event.preventDefault();
          var status = document.getElementById("my-form-status");
          var data = new FormData(event.target);
          fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
                'Accept': 'application/json'
            }
          }).then(response => {
            status.innerHTML = "Sucesso! Obrigado por enviar!";
            form.reset()
          }).catch(error => {
            status.innerHTML = "Ops! Houve um erro ao enviar seu formulario. Revise as informacoes e envie novamente"
          });
        }
        form.addEventListener("submit", handleSubmit)
    </script>
</body>
</html>